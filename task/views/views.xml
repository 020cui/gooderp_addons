<openerp>
	<data>

		<record model="ir.ui.view" id="timesheet_tree">
			<field name="name">时间记录列表</field>
			<field name="model">timesheet</field>
			<field name="arch" type="xml">
				<tree>
					<field name="date"/>
					<field name="user_id"/>
				</tree>
			</field>
		</record>
		<record model="ir.ui.view" id="timesheet_form">
			<field name="name">时间记录</field>
			<field name="model">timesheet</field>
			<field name="arch" type="xml">
				<form string="时间记录">
					<sheet>
						<group>
							<group>
								<field name="user_id"/>
								<field name="date"/>
							</group>
						</group>
						<notebook>
							<page name='task' string='待办事项'>
								<field name="task_ids">
									<tree string="计划">
										<field name="name"/>
										<field name="status"/>
									</tree>
								</field>
							</page>
							<page name='timeline' string='工作记录'>
								<field name="timeline_ids">
									<tree string="进展"  editable='BOTTOM'>
										<field name='task_id'/>
										<field name='just_done'/>
										<field name='next_action'/>
										<field name='hours' sum="全天合计"/>
										<field name="user_id"/>
										<field name='next_datetime'/>
										<field name='set_status'/>
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>
		<record model="ir.ui.view" id="project_tree">
			<field name="name">项目列表</field>
			<field name="model">project</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="customer_id"/>
				</tree>
			</field>
		</record>
		<record model="ir.ui.view" id="project_form">
			<field name="name">项目</field>
			<field name="model">project</field>
			<field name="arch" type="xml">
				<form string="项目">
					<sheet>
						<group>
							<group>
								<field name="name"/>
								<field name="customer_id"/>
							</group>
						</group>
						<field name="task_ids">
							<tree string="任务"  editable='BOTTOM'>
								<field name="name"/>
								<field name="user_id"/>
								<field name="project_id"/>
								<field name="next_action"/>
								<field name="next_datetime"/>
							</tree>
						</field>
					</sheet>
				</form>
			</field>
		</record>
		<record model="ir.ui.view" id="task_tree">
			<field name="name">任务列表</field>
			<field name="model">task</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="user_id"/>
					<field name="project_id"/>
					<field name="next_action"/>
					<field name="next_datetime"/>
				</tree>
			</field>
		</record>
		<record model="ir.ui.view" id="task_form">
			<field name="name">任务</field>
			<field name="model">task</field>
			<field name="arch" type="xml">
				<form string="任务">
					<header>
						<field name="status" widget="statusbar"/>
					</header>
					<sheet>
						<group>
							<group>
								<field name="project_id"/>
								<field name="name"/>
								<field name="plan_hours"/>
								<field name="user_id"/>
							</group>
							<group>
								<field name="next_action"/>
								<field name="next_datetime"/>
								<field name="hours"/>
							</group>
						</group>
						<field name="timeline_ids">
							<tree string="进展" edit='0'>
								<field name="create_uid"/>
								<field name="create_date"/>
								<field name='hours' sum="全天合计"/>
								<field name='just_done'/>
							</tree>
						</field>
					</sheet>
				</form>
			</field>
		</record>
		<record id="task_kanban" model="ir.ui.view">
			<field name="name">task kanban</field>
			<field name="model">task</field>
			<field name="arch" type="xml">
				<kanban class="o_kanban_mobile">
					<field name="name"/>
					<field name="user_id"/>
					<field name="project_id"/>
					<field name="next_action"/>
					<field name="next_datetime"/>
					<field name="hours"/>
					<field name="plan_hours"/>
					<templates>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_card oe_kanban_global_click">
								<p>
									<t t-esc="record.project_id.value"/>
									<t t-esc="record.name.value"/>
									<t t-esc="record.hours.value"/>
									/
									<t t-esc="record.plan_hours.value"/>
								</p>
								<p>
									<t t-esc="record.user_id.value"/>
									<t t-esc="record.next_datetime.value"/>
									<t t-esc="record.next_action.value"/>
								</p>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		<!--action-->
		<record model="ir.actions.act_window" id="action_project">
			<field name="name">项目</field>
			<field name="res_model">project</field>
			<field name="view_mode">tree,form</field>
		</record>
		<record model="ir.actions.act_window" id="action_task">
			<field name="name">任务</field>
			<field name="res_model">task</field>
			<field name="view_mode">tree,form,kanban</field>
		</record>
		<record model="ir.actions.act_window" id="action_timesheet">
			<field name="name">时间记录</field>
			<field name="res_model">timesheet</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem name="任务" id="menu_task_root" web_icon="task,static/description/task.png"/>
		<menuitem name="任务" id="menu_task_data" parent="menu_task_root"/>
		<menuitem name="项目" id="menu_project" parent="menu_task_data"
		action="action_project" sequence='1'/>
		<menuitem name="任务记录" id="menu_task" parent="menu_task_data"
		action="action_task" sequence='5'/>
		<menuitem name="时间记录" id="menu_timesheet" parent="menu_task_data"
		action="action_timesheet" sequence='10'/>
	</data>
</openerp>